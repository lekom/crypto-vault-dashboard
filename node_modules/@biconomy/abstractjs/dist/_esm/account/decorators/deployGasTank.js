import { waitForSupertransactionReceipt } from "../../clients/decorators/mee/index.js";
export const deployGasTank = async (mcNexus, parameters) => {
    const { chainId, amount, tokenAddress, meeClient, confirmations } = parameters;
    const { isDeployed, address } = mcNexus.deploymentOn(chainId, true);
    const deployed = await isDeployed();
    if (deployed) {
        return { isDeployed: true, address };
    }
    const tranferInstruction = await mcNexus.build({
        type: "transfer",
        data: {
            recipient: address,
            amount,
            chainId,
            tokenAddress
        }
    });
    const fusionQuote = await meeClient.getFusionQuote({
        trigger: {
            amount,
            tokenAddress,
            chainId
        },
        instructions: [tranferInstruction],
        feeToken: {
            address: tokenAddress,
            chainId
        }
    });
    const { hash } = await meeClient.executeFusionQuote({
        fusionQuote
    });
    await waitForSupertransactionReceipt(meeClient, {
        hash,
        confirmations: confirmations || 2
    });
    return { isDeployed: true, address, hash };
};
export default deployGasTank;
//# sourceMappingURL=deployGasTank.js.map