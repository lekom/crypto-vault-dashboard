"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.signQuote = exports.formatSignedQuotePayload = exports.prepareSignableQuotePayload = void 0;
const viem_1 = require("viem");
const DEFAULT_PREFIX = "0x177eee00";
const prepareSignableQuotePayload = (quote) => {
    return {
        signablePayload: {
            message: { raw: quote.hash }
        },
        metadata: {}
    };
};
exports.prepareSignableQuotePayload = prepareSignableQuotePayload;
const formatSignedQuotePayload = (quote, _metadata, signature) => {
    return {
        ...quote,
        signature: (0, viem_1.concatHex)([DEFAULT_PREFIX, signature])
    };
};
exports.formatSignedQuotePayload = formatSignedQuotePayload;
const signQuote = async (client, params) => {
    const { account: account_ = client.account, quote } = params;
    const signer = account_.signer;
    const { signablePayload, metadata } = (0, exports.prepareSignableQuotePayload)(quote);
    const signedMessage = await signer.signMessage(signablePayload);
    return (0, exports.formatSignedQuotePayload)(quote, metadata, signedMessage);
};
exports.signQuote = signQuote;
exports.default = exports.signQuote;
//# sourceMappingURL=signQuote.js.map