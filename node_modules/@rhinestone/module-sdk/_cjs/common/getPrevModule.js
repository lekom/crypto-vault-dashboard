"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPreviousModule = void 0;
const viem_1 = require("viem");
const constants_1 = require("./constants");
const queries_1 = require("./queries");
const getPreviousModule = async ({ account, module, client, }) => {
    let installedModules = await (0, queries_1.getInstalledModules)({
        client,
        account,
    });
    const index = installedModules.indexOf((0, viem_1.getAddress)(module.module));
    if (index === 0) {
        return constants_1.SENTINEL_ADDRESS;
    }
    else if (index > 0) {
        return installedModules[index - 1];
    }
    else {
        throw new Error(`Module ${module.module} not found in installed modules`);
    }
};
exports.getPreviousModule = getPreviousModule;
//# sourceMappingURL=getPrevModule.js.map